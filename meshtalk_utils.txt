meshtalk_utils.py reference
Author: Anton Vologzhanin (R3VAF)

========================
EN
========================

Purpose
- Shared utility module for `meshTalk.py`.
- Keeps wire-format helpers, history codecs, metadata/status formatting, and safe compression wrappers.

License
- Apache License 2.0 (`LICENSE`).
- Keep attribution notices from `NOTICE` when redistributing.

Scope
- Message payload compression/decompression wrappers for encrypted blobs.
- Legacy/compact wire payload builders and parsers.
- Key-frame receive policy and capability parsing.
- History text codec (`b64:`), parsing helpers, and multipart assembly.
- Human-readable status/meta text formatting (EN/RU).

Used by
- `meshTalk.py` directly imports this module.
- Unit-tested via `tests/test_meshtalk_utils.py` (local tooling/tests).

Compatibility notes
- Utility functions preserve backward decode behavior for legacy payload/meta variants.
- `parse_compact_meta()` recognizes MC block signatures and maps mode labels.

========================
RU
========================

Назначение
- Общий модуль утилит для `meshTalk.py`.
- Содержит помощники формата wire, кодеки истории, форматирование метаданных/статусов и безопасные обертки сжатия.

Лицензия
- Apache License 2.0 (`LICENSE`).
- При распространении сохраняйте атрибуцию из `NOTICE`.

Область ответственности
- Обертки сжатия/распаковки payload для шифрованных блоков.
- Сборка и разбор legacy/compact wire payload.
- Политика приема key-frame и парсинг capabilities.
- Кодек текста истории (`b64:`), парсеры и сборка multipart.
- Формирование человекочитаемых статусов/метаданных (EN/RU).

Используется
- `meshTalk.py` импортирует модуль напрямую.
- Покрывается тестами `tests/test_meshtalk_utils.py` (локальные инструменты/тесты).

Заметки по совместимости
- Утилиты сохраняют обратную совместимость декодирования legacy-вариантов payload/meta.
- `parse_compact_meta()` распознает сигнатуры MC-блоков и сопоставляет labels режимов.
